{% extends 'index.html' %}

{% block header %}
    <style type="text/css">
        #g_name:invalid, #g_name:focus:invalid {
            color:red;
        }

        #g_name:valid {
            color:rgba(0,0,0,.54);
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9bBaFWuTJ0eh06pTB9kHYnSRHQmf1S7Q&v=3.exp&sensor=false"></script>
    <script src="{{ url_for('static', filename='js/sh-edit.js') }}"></script>
{% endblock %}

{% block content %}
    <section class="mdl-grid section--center">
        <div class="mdl-card mdl-cell mdl-cell--8-col mdl-shadow--2dp" style="left:15%; top: 12%;">
            <div class="mdl-card__title mdl-card--expand">
                <h4 style="margin-left: 4%">Gateway</h4>
                <hr>
            </div>
            {#  edit #}
            {% if gateway %}
                <form action="{{ url_for('gateway.update_gw', gw_id=gateway.id) }}" method="post" style="display:inline;">
                    <div class="mdl-card__supporting-text mdl-grid mdl-grid--no-spacing">
                        <div class="mdl-cell mdl-cell--1-col" >
                          <i class="material-icons md-36">toc</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col" >
                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input disabled class="mdl-textfield__input" type="text" pattern="[0-9]*(\.[0-9]+)?" name="id" id='g_id' value="{{ gateway.id }}">
                            <label class="mdl-textfield__label" for="g_id">Gateway ID</label>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">router</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col" >
                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="name" pattern="[a-zA-Z0-9 ]+" id='g_name' value="{{ gateway.name }}" required>
                            <label class="mdl-textfield__label" for="g_name">Gateway Name</label>
                              <span class="mdl-textfield__error">Letters and digits only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">link</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="url" name="url" id='g_url' value="{{ gateway.url }}" required>
                            <label class="mdl-textfield__label" for="g_url">Gateway Url</label>
                            <span class="mdl-textfield__error">Legal URL only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">location_on</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="address" id='g_address' pattern="([a-zA-Z0-9]| |.|,|@|#|\$|%|&)+" value="{{ gateway.address }}" required>
                            <label class="mdl-textfield__label" for="g_address">Address</label>
                                <span class="mdl-textfield__error">Letters, digits and spaces only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">my_location</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="latitude" id='g_lat' pattern="-?[0-9]*(\.[0-9]+)?" value="{{ gateway.latitude }}" required>
                            <label class="mdl-textfield__label" for="g_lat">Latitude</label>
                                <span class="mdl-textfield__error">Digits only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">my_location</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="longitude" id='g_lon' pattern="-?[0-9]*(\.[0-9]+)?" value="{{ gateway.longitude }}" required>
                            <label class="mdl-textfield__label" for="g_lon">Longitude</label>
                                <span class="mdl-textfield__error">Digits only</span>
                          </div>
                        </div>
                    </div>
                <div class="mdl-card__actions" style="margin-left: 3%;">
                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">UPDATE</a>
                </div>
            </form>
            {#  new #}
            {%  else %}
                <form action="{{ url_for('gateway.create_gw') }}" method="post" style="display:inline;">
                    <div class="mdl-card__supporting-text mdl-grid mdl-grid--no-spacing">
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">router</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col" >
                          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="name" pattern="[a-zA-Z0-9 ]+" id='g_name' >
                            <label class="mdl-textfield__label" for="g_name">Gateway Name</label>
                              <span class="mdl-textfield__error">Letters and digits only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">link</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="url" name="url" id='g_url' >
                            <label class="mdl-textfield__label" for="g_url">Gateway Url</label>
                            <span class="mdl-textfield__error">Legal URL only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">location_on</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="address" id='g_address' pattern="([a-zA-Z0-9]| |.|,|@|#|\$|%|&)+" >
                            <label class="mdl-textfield__label" for="g_address">Address</label>
                                <span class="mdl-textfield__error">Letters, digits and spaces only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">my_location</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="latitude" id='g_lat' pattern="-?[0-9]*(\.[0-9]+)?" >
                            <label class="mdl-textfield__label" for="g_lat">Latitude</label>
                                <span class="mdl-textfield__error">Digits only</span>
                          </div>
                        </div>
                        <div class="mdl-cell mdl-cell--1-col">
                            <i class="material-icons md-36">my_location</i>
                        </div>
                        <div class="mdl-cell mdl-cell--5-col">
                            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                            <input class="mdl-textfield__input" type="text" name="longitude" id='g_lon' pattern="-?[0-9]*(\.[0-9]+)?" >
                            <label class="mdl-textfield__label" for="g_lon">Longitude</label>
                                <span class="mdl-textfield__error">Digits only</span>
                          </div>
                        </div>
                    </div>
                <div class="mdl-card__actions" style="margin-left: 3%;">
                    <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">ADD</a>
                </div>
            </form>
            {%  endif %}
        </div>
    </section>

{% endblock %}
